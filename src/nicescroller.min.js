"use strict";(function(A){var w="ontouchend" in document,D={click:"click",start:w?"touchstart":"mousedown",move:w?"touchmove":"mousemove",end:w?"touchend":"mouseup"};var L=(function(){var R=document.createElement("div"),Q=R.style,o=["WebkitT","MozT","MsT"],O="",P=0,N=3,m="";for(P;P<N;P++){O=o[P];if(typeof Q[O+"ransform"]!=="undefined"){m="-"+O.replace("T","").toLowerCase()+"-";break}}return m}());function c(m,N){var o={};o[L+"transform"]="translate3d("+m+"px, "+N+"px, 0px)";this.jScrollBox.css(o);this.current={x:m,y:N};if(this.cfg.scrollbar){I.apply(this)}}function I(){var Q=this.current,P={},m=this.wrapperSize,o=0,O=this.dir,N=this.barSize;if(O!==1){o=Q.x/this.maxScrollWidth*(m.width-N.x);P[L+"transform"]="translate3d("+o+"px, 0px, 0px)";this.jBarX.css(P)}if(O!==0){o=Q.y/this.maxScrollHeight*(m.height-N.y);P[L+"transform"]="translate3d(0px, "+o+"px, 0px)";this.jBarY.css(P)}}var j={"ease-out-back":function(o,m,P,O){var N=1.70158;return P*((o=o/O-1)*o*((N+1)*o+N)+1)+m},"ease-out":function(o,m,O,N){return -O*(o/=N)*(o-2)+m},linear:function(o,m,O,N){return o/N*O+m}};function G(o){var m=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||setTimeout)(o);return m}function z(m){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||clearTimeout)(m)}function l(X){var m=+new Date,Q=0,O,o,P=X.duration,T=this.current.x,S=this.current.y,W=X.x-T,U=X.y-S,R=this.jScrollBox,V=this;function N(){Q=+new Date-m;if(j[V.cfg.animation]){O=j[V.cfg.animation](Q,T,W,P);o=j[V.cfg.animation](Q,S,U,P)}else{O=j.linear(Q,T,W,P);o=j.linear(Q,S,U,P)}if(Q>=P){O=X.x;o=X.y;c.call(V,O,o);V.jBox.removeClass("active");V.cfg.onscrollend&&V.cfg.onscrollend.apply(V);return}c.call(V,O,o);V.timer=G(N)}N()}function E(){this.timer&&z(this.timer)}var i={scrollbar:true,momentum:true,animation:"ease-out",deceleration:0.0006};function q(m){return A.extend({},i,m)}function M(){var o=this.dir,m=this.point,N=this.current;m.x=o===1?0:N.x;m.y=o===0?0:N.y}var C=null,v=[],F={},H={},b,s,k=false,e=0;var g=function(N){var N=N.originalEvent?N.originalEvent:N,o=N.touches,m=0,O=0;if(o){m=o[0].pageX;O=o[0].pageY}else{m=N.clientX;O=N.clientY}return{x:m,y:O}};function x(m){if(this.cfg.ontouchstart&&!this.cfg.ontouchstart.apply(this)){return}E.apply(this);this.touched=true;v.push(this);F=g(m);H=F;M.call(this);b=+new Date}function n(N){C=v[0];if(!C||!C.touched){return}C.jBox.addClass("active");H=g(N);var o=C.dir,m=C.point;y.call(C,o===1?0:m.x+H.x-F.x,o===0?0:m.y+H.y-F.y);N.preventDefault()}function r(Q){if(!C){return}C.touched=false;var O=H.x-F.x,N=H.y-F.y,W,T,U=C.point,S=C.cfg.deceleration,R=C.wrapperSize,o,m=C.dir,V=C.maxScrollWidth,P=C.maxScrollHeight;if(O===0&&N===0){return}s=+new Date-b;if(C.cfg.momentum){W=m===1?{duration:0,destination:0}:f(U.x,U.x+O,s,C.maxScrollWidth,R.width,S);T=m===0?{duration:0,destination:0}:f(U.y,U.y+N,s,C.maxScrollHeight,R.height,S);o=Math.max(W.duration,T.duration);W.destination=W.destination>0?0:(W.destination<V?V:W.destination);T.destination=T.destination>0?0:(T.destination<P?P:T.destination);C.scrollTo(W.destination,T.destination,o)}C.cfg.ontouchend&&C.cfg.ontouchend.apply(C);v=[]}function f(R,N,O,m,S,T){var o=N-R,P=Math.abs(o)/O,U,Q;U=R+(P*P)/(2*T)*(o<0?-1:1);Q=P/T;if(U<m){U=S?m-(S/2.5*(P/8)):m;o=Math.abs(U-R);Q=o/P}else{if(U>0){U=S?S/2.5*(P/8):0;o=Math.abs(R)+U;Q=o/P}}return{destination:Math.round(U),duration:Q}}function u(m,N,o){E.apply(this);l.call(this,{duration:o,x:m,y:N});this.jBox.addClass("active");return this}function a(m,o){E.apply(this);l.call(this,{duration:o,x:m,y:this.current.y});this.jBox.addClass("active");return this}function K(o,m){E.apply(this);l.call(this,{duration:m,x:this.current.x,y:o});this.jBox.addClass("active");return this}function y(m,o){c.call(this,m,o)}function d(){var m=this;this.jScrollBox.on(D.start,function(o){x.call(m,o)});if(!k){A(document).on(D.move,n).on(D.end,r);k=true}}function B(){A(document).off(D.move,n).off(D.end,r);k=false}function J(){var o,O,N,P,m,Q;this.jScrollBox=this.jBox.children().eq(0);P={width:this.jBox.width(),height:this.jBox.height()};o=P.width-this.jScrollBox.width();O=P.height-this.jScrollBox.height();m=this.cfg.x||0;Q=this.cfg.y||0;N=o<0?(O<0?2:0):(O<0?1:-1);if(N===-1){return}this.dir=N;this.maxScrollWidth=o;this.maxScrollHeight=O;this.wrapperSize=P;this.point={x:m,y:Q};if(this.cfg.scrollbar){this.jBox.append('<div class="scrollbar-x scrollbar"><div class="bar"></div></div><div class="scrollbar-y scrollbar"><div class="bar"></div></div>');this.jScrollBarX=this.jBox.find(".scrollbar-x");this.jScrollBarY=this.jBox.find(".scrollbar-y");this.barSize={x:P.width/-o*P.width,y:P.height/-O*P.height};this.jBarX=this.jScrollBarX.find(".bar").width(this.barSize.x);this.jBarY=this.jScrollBarY.find(".bar").height(this.barSize.y);N===0&&this.jScrollBarY.remove();N===1&&this.jScrollBarX.remove()}d.apply(this);e++;c.call(this,m,Q)}function t(o){var m=this.current.x,N=this.current.y;e--;this.jBox.find(".scrollbar").remove();this.cfg=A.extend(this.cfg,{x:m,y:N},o);J.apply(this);return this}function h(){var m="";this.jBox.removeClass("active").off().find(".scrollbar").remove();for(m in this){delete this[m]}this.__proto__=null;e--;if(e===0){B()}}function p(o,m){this.jBox=A(o);this.cfg=q(m);J.apply(this);return this}p.prototype={scrollTo:u,scrollXTo:a,scrollYTo:K,refresh:t,destroy:h};if(typeof define==="function"&&define.amd){define([],function(){return p})}else{if(typeof module!=="undefined"&&module.exports){module.exports=p}else{window.NiceScroller=p}}}(window.jQuery||window.Zepto));
